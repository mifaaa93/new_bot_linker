
apt install -y python3-venv 
apt install -y build-essential libssl-dev libffi-dev python3-dev

test
test1

cd real_estate_bot/

python3 -m venv venv

source venv/bin/activate

pip install -r requirements.txt

#############################################
nano /etc/systemd/system/real_estate.socket

[Unit]
Description=gunicorn socket

[Socket]
ListenStream=/run/real_estate.sock

[Install]
WantedBy=sockets.target

##########################################

nano /etc/systemd/system/real_estate.service

[Unit]
Description=gunicorn daemon
Requires=real_estate.socket
After=network.target

[Service]
User=root
Group=www-data
WorkingDirectory=/root/real_estate_bot
ExecStart=/root/real_estate_bot/venv/bin/gunicorn \
          --access-logfile - \
          --workers 3 \
          --bind unix:/run/real_estate.sock \
          real_estate_bot.wsgi:application

[Install]
WantedBy=multi-user.target

#############################
systemctl start real_estate.socket
systemctl enable real_estate.socket

apt install nginx

#######################################################
nano /etc/nginx/sites-available/real_estate

server {
    listen 80;
    server_name 88.99.59.75;

    location = /favicon.ico { access_log off; log_not_found off; }

    location /static {
        autoindex on;
        alias /var/www/site/static;
    }

    location /media/ {
        root /root/real_estate_bot;
    }

    location / {
        include proxy_params;
        proxy_pass http://unix:/run/real_estate.sock;
    }
}

#####################################################
ln -s /etc/nginx/sites-available/real_estate /etc/nginx/sites-enabled
systemctl restart nginx


systemctl daemon-reload
systemctl restart real_estate.socket
systemctl restart real_estate.service
systemctl restart nginx

systemctl restart mokler_bot


systemctl stop real_estate.socket
systemctl stop real_estate.service
systemctl stop nginx

systemctl stop mokler_bot
systemctl restart mokler_bot

systemctl stop diraai_bot
systemctl restart diraai_bot

mokler_bot

sudo nano /etc/systemd/system/mokler_bot.service

[Unit]
Description=mokler_bot
After=multi-user.target

[Service]
Type=idle
WorkingDirectory=/root/real_estate_bot
ExecStart=/root/real_estate_bot/venv/bin/python3 /root/real_estate_bot/manage.py bot
Restart=always

[Install]
WantedBy=multi-user.target

diraai_bot

sudo nano /etc/systemd/system/diraai_bot.service

[Unit]
Description=diraai_bot
After=multi-user.target

[Service]
Type=idle
WorkingDirectory=/root/real_estate_bot
ExecStart=/root/real_estate_bot/venv/bin/python3 /root/real_estate_bot/manage.py diraai
Restart=always

[Install]
WantedBy=multi-user.target
